---
author: jiunkoo
title: 자바 - String 클래스 정리
date: 2023-08-11 13:00:00 +0900
---


<br/>
<br/>

## 1. String
String은 java에 정의된 클래스로 String의 특징은 다음과 같다.  
* 기본형 타입처럼 new 예약어 없이도 정의 가능하다.  
* String 객체는 불변적이다. javadoc를 보면 public final class String이라고 되어 있다.  
* 문자열 풀: 자바에선 문자열 리터럴이 자동으로 문자열 풀에 저장된다. 같은 문자열 리터럴을 가진 String 객체가 동일한 메모리 위치를 참조하게 되어 메모리를 절약할 수 있다.  
* 문자열을 연결하는 연산자 +를 지원한다.  

## 2. StringBuilder와 StringBuffer
String은 불변 객체이다.  
따라서 문자열을 변경해야 할 때는 StringBuilder나 StringBuffer를 사용한다.  

공통점
* 둘 다 가변적인 문자열을 다룬다. 
* 메서드가 유사하다.

차이점
* 동기화
    * StringBuffer: 멀티스레드 환경에서 안전하게 동작하도록 동기화된 메서드 제공.
    * StringBuilder: 단일 스레드 최적화. 동기화가 필요한 경우 별도 처리 필요.
* 
* 성능
    * StringBuffer: 동기화로 안전성을 보장하나 성능 비용이 발생할 수 있다.  
    * StringBuilder: 비동기화로 더 빠른 성능을 제공한다.
* 사용 시나리오
    * StringBuffer: 멀티스레드 환경에서 문자열 조작이 필요한 경우 사용  
    * StringBuilder: 단일 스레드 환경 또는 동기화가 별도로 이루어지는 상황에서 사용.


## 3. 생각 더하기
컴파일러 최적화가 없다는 가정 하에, Loop문 내에서 String +를 하는 로직이 왜 나쁠까?  
컴파일러 최적화가 없는 상황에서 루프 안에서 문자열 결합은 성능과 메모리 관리 측면에서 비효율적이다.  

* 불변성과 메모리 할당: 문자열은 대개 불변(immutable)합니다. 따라서 문자열을 결합하면 새로운 문자열이 생성된다. 루프 안에서 반복적으로 문자열을 결합하면 루프마다 새로운 문자열이 메모리에 할당되서 메모리 사용량이 급증하고, 불필요한 메모리 할당과 해제 작업으로 인해 프로그램 실행 속도가 느려질 수 있다.
* 문자열 재할당: 문자열을 결합할 때마다 새로운 문자열 객체가 생성되므로, 이전에 생성된 문자열 객체는 더 이상 사용되지 않고 메모리에 남는다. 참조되지 않는 객체는 GC에 의해 제거되므로 잦은 GC가 발생해서 결과적으로 성능이 느려진다.
* 성능 문제: 문자열 결합은 일반적으로 문자열을 새로 생성하고 이전 문자열을 복사하는 작업을 수행한다. 이는 루프 안에서 반복적으로 이루어지면서 O(n^2) 시간 복잡도가 발생할 수 있다. 따라서 루프의 반복 횟수가 증가할수록 결합 작업에 필요한 시간이 기하급수적으로 증가한다.  
* 캐시 활용: 문자열 결합은 데이터를 연속적으로 저장하거나 캐시에 잘 활용할 수 없는 경우가 많다. 이로 인해 CPU 캐시 미스(cache miss)가 발생할 가능성이 높아져 성능 저하가 발생할 수 있다.  
